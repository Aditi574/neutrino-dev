
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Upgrading from v4 to v5 Â· Neutrino</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-npmsearchlist/styles.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="cli/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="installation.html">
            
                <a href="installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="usage.html">
            
                <a href="usage.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="project-layout.html">
            
                <a href="project-layout.html">
            
                    
                    Project Layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="FAQ.html">
            
                <a href="FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="presets/">
            
                <a href="presets/">
            
                    
                    Presets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="presets/neutrino-preset-web/">
            
                <a href="presets/neutrino-preset-web/">
            
                    
                    Web
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="presets/neutrino-preset-react/">
            
                <a href="presets/neutrino-preset-react/">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="presets/neutrino-preset-node/">
            
                <a href="presets/neutrino-preset-node/">
            
                    
                    Node.js
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="presets/neutrino-preset-airbnb-base/">
            
                <a href="presets/neutrino-preset-airbnb-base/">
            
                    
                    Airbnb
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="presets/neutrino-preset-karma/">
            
                <a href="presets/neutrino-preset-karma/">
            
                    
                    Karma
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="presets/neutrino-preset-mocha/">
            
                <a href="presets/neutrino-preset-mocha/">
            
                    
                    Mocha
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="presets/neutrino-preset-jest/">
            
                <a href="presets/neutrino-preset-jest/">
            
                    
                    Jest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="presets/community-presets.html">
            
                <a href="presets/community-presets.html">
            
                    
                    Community presets
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="middleware/">
            
                <a href="middleware/">
            
                    
                    Middleware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="middleware/neutrino-middleware-banner/">
            
                <a href="middleware/neutrino-middleware-banner/">
            
                    
                    banner
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="middleware/neutrino-middleware-chunk/">
            
                <a href="middleware/neutrino-middleware-chunk/">
            
                    
                    chunk
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="middleware/neutrino-middleware-clean/">
            
                <a href="middleware/neutrino-middleware-clean/">
            
                    
                    clean
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="middleware/neutrino-middleware-compile-loader/">
            
                <a href="middleware/neutrino-middleware-compile-loader/">
            
                    
                    compile-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="middleware/neutrino-middleware-copy/">
            
                <a href="middleware/neutrino-middleware-copy/">
            
                    
                    copy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="middleware/neutrino-middleware-env/">
            
                <a href="middleware/neutrino-middleware-env/">
            
                    
                    env
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="middleware/neutrino-middleware-eslint/">
            
                <a href="middleware/neutrino-middleware-eslint/">
            
                    
                    eslint
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="middleware/neutrino-middleware-font-loader/">
            
                <a href="middleware/neutrino-middleware-font-loader/">
            
                    
                    font-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="middleware/neutrino-middleware-hot/">
            
                <a href="middleware/neutrino-middleware-hot/">
            
                    
                    hot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="middleware/neutrino-middleware-html-loader/">
            
                <a href="middleware/neutrino-middleware-html-loader/">
            
                    
                    html-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11" data-path="middleware/neutrino-middleware-html-template/">
            
                <a href="middleware/neutrino-middleware-html-template/">
            
                    
                    html-template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12" data-path="middleware/neutrino-middleware-image-loader/">
            
                <a href="middleware/neutrino-middleware-image-loader/">
            
                    
                    image-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13" data-path="middleware/neutrino-middleware-loader-merge/">
            
                <a href="middleware/neutrino-middleware-loader-merge/">
            
                    
                    loader-merge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.14" data-path="middleware/neutrino-middleware-minify/">
            
                <a href="middleware/neutrino-middleware-minify/">
            
                    
                    minify
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.15" data-path="middleware/neutrino-middleware-named-modules/">
            
                <a href="middleware/neutrino-middleware-named-modules/">
            
                    
                    named-modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.16" data-path="middleware/neutrino-middleware-named-start-server/README.md">
            
                <span>
            
                    
                    start-server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.17" data-path="middleware/neutrino-middleware-named-style-loader/README.md">
            
                <span>
            
                    
                    style-loader
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="customization/">
            
                <a href="customization/">
            
                    
                    Customization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="customization/simple.html">
            
                <a href="customization/simple.html">
            
                    
                    Simple
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="customization/advanced.html">
            
                <a href="customization/advanced.html">
            
                    
                    Advanced
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="creating-presets.html">
            
                <a href="creating-presets.html">
            
                    
                    Creating presets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="learning-resources.html">
            
                <a href="learning-resources.html">
            
                    
                    Learning Resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="api/">
            
                <a href="api/">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="cli/">
            
                <a href="cli/">
            
                    
                    CLI
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.13" data-path="upgrading-neutrino.html">
            
                <a href="upgrading-neutrino.html">
            
                    
                    Upgrading from v4 to v5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <a target="_blank" href="https://github.com/mozilla-neutrino/neutrino-dev/tree/docs-v4/docs">
            
                    
                    v4 Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="contributing/">
            
                <a href="contributing/">
            
                    
                    Contributing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="contributing/development.html">
            
                <a href="contributing/development.html">
            
                    
                    Development Process
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="contributing/code-of-conduct.html">
            
                <a href="contributing/code-of-conduct.html">
            
                    
                    Code of Conduct
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Upgrading from v4 to v5</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="upgrading-from-neutrino-v4-to-v5">Upgrading from Neutrino v4 to v5</h1>
<p>Neutrino v5 introduces a number of changes, with some of them being breaking changes. To upgrade from Neutrino v4
to v5, be sure to check this list for tasks you may need to perform to use this latest version:</p>
<ul>
<li>Updates to config for creating plugins (from webpack-chain v3 upgrade):</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// Creating plugins in v4</span>
neutrino<span class="token punctuation">.</span>config
  <span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>WebpackPlugin<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Creating plugins in v5</span>
neutrino<span class="token punctuation">.</span>config
  <span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>WebpackPlugin<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
</code></pre>
<ul>
<li>Updates to config for modifying plugins (from webpack-chain v3 upgrade):</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// Modifying plugins in v4</span>
neutrino<span class="token punctuation">.</span>config
  <span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">inject</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Plugin<span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Plugin</span><span class="token punctuation">(</span><span class="token operator">...</span>newArgs<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Modifying plugins in v5</span>
neutrino<span class="token punctuation">.</span>config
  <span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>args <span class="token operator">=</span><span class="token operator">&gt;</span> newArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>Updates to config for creating loaders (from webpack-chain v3 upgrade):</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// Creating loaders in v4</span>
neutrino<span class="token punctuation">.</span>config<span class="token punctuation">.</span>module
  <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&apos;compile&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">&apos;babel&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;babel-loader&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;object-rest-spread&apos;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Creating loaders in v5</span>
neutrino<span class="token punctuation">.</span>config<span class="token punctuation">.</span>module
  <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&apos;compile&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;babel&apos;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">&apos;babel-loader&apos;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token punctuation">{</span> plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;object-rest-spread&apos;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>Updates to config for modifying loaders (from webpack-chain v3 upgrade). The function now gets its options directly
instead of being nested in an object:</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// Modifying loaders in v4</span>
neutrino<span class="token punctuation">.</span>config<span class="token punctuation">.</span>module
  <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&apos;compile&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">&apos;babel&apos;</span><span class="token punctuation">,</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">merge</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;object-rest-spread&apos;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Modifying loaders in v5</span>
neutrino<span class="token punctuation">.</span>config<span class="token punctuation">.</span>module
  <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&apos;compile&apos;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;babel&apos;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>options <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">merge</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token punctuation">{</span> plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;object-rest-spread&apos;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>Updates to <code>include</code> and <code>exclude</code> for rules (from webpack-chain v3). In the previous webpack-chain
package, <code>include</code> and <code>exclude</code> were functions where you provided paths as arguments. These are now
<code>ChainedMap</code>s, making them much more extensible should you need to manipulate these values:</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// Adding rule includes and excludes in v4</span>
neutrino<span class="token punctuation">.</span>config<span class="token punctuation">.</span>module
  <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&apos;compile&apos;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">exclude</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Adding rule includes and excludes in v5</span>
neutrino<span class="token punctuation">.</span>config<span class="token punctuation">.</span>module
  <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&apos;compile&apos;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>include
      <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>exclude
      <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// You can also use .merge() to add multiple paths at once:</span>
neutrino<span class="token punctuation">.</span>config<span class="token punctuation">.</span>module
  <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&apos;compile&apos;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>include<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>exclude<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>Simple configuration via package.json now done from top-level <code>neutrino</code> object. Rename <code>config</code> to <code>neutrino</code>, and
rename <code>config.neutrino</code> to <code>neutrino.config</code>. Presets also fall under this <code>neutrino</code> object. The <code>custom</code> object has
been renamed to <code>options</code>.</li>
</ul>
<pre class="language-"><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;neutrino&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;entry&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;vendor&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;use&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;neutrino-preset-react&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;mocha&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;reporter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nyan&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<ul>
<li>The Web preset has renamed its styling rule from <code>css</code> to <code>style</code>:</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// v4 API for Web preset</span>
neutrino<span class="token punctuation">.</span>config<span class="token punctuation">.</span>module<span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&apos;css&apos;</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// v5 API for Web preset</span>
neutrino<span class="token punctuation">.</span>config<span class="token punctuation">.</span>module<span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&apos;style&apos;</span><span class="token punctuation">)</span>
</code></pre>
<pre class="language-"><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;neutrino&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;rule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<ul>
<li>The Neutrino CLI has renamed <code>--presets</code> to <code>--use</code> to better reflect the usage of middleware and presets, and to
make the inclusion of middleware consistent with the API at <code>neutrino.use()</code>.</li>
<li>Jest upgraded to v19, which changes the option <code>testPathDirs</code> to <code>roots</code>. Jest options set using
package.json can now only be done at <code>neutrino.options.jest</code> (no more package.json <code>jest</code>);</li>
<li>Linting base is deprecated in favor of <code>neutrino-middleware-eslint</code>:</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// v4 API</span>
<span class="token keyword">const</span> lint <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino-lint-base&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">lint</span><span class="token punctuation">(</span>neutrino<span class="token punctuation">)</span><span class="token punctuation">;</span>
neutrino<span class="token punctuation">.</span>config<span class="token punctuation">.</span>module
  <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&apos;lint&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">&apos;eslint&apos;</span><span class="token punctuation">,</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">merge</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token punctuation">{</span> rules<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* */</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// v5 API</span>
<span class="token keyword">const</span> eslint <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino-middleware-eslint&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

neutrino<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>eslint<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  eslint<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* */</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<ul>
<li>When using a linting preset or consuming anything with <code>neutrino-middleware-eslint</code>, the <code>eslintrc()</code> method has been
moved from <code>neutrino.custom.eslintrc</code> to <code>neutrino.eslintrc</code>:</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// v4 API</span>
neutrino<span class="token punctuation">.</span>custom<span class="token punctuation">.</span><span class="token function">eslintrc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// v5 API</span>
neutrino<span class="token punctuation">.</span><span class="token function">eslintrc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>The default export of the Neutrino package is now an object with several methods, one of these being the low-level
Neutrino API:</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><p>The Neutrino API has undergone significant changes and no longer needs to be called as a constructor with <code>new</code>.</p>
</li>
<li><p>The Neutrino API no longer accepts preset strings as its argument. The function now accepts an options object to
be set at <code>neutrino.options</code>:</p>
</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span> mocha<span class="token punctuation">:</span> <span class="token punctuation">{</span> reporter<span class="token punctuation">:</span> <span class="token string">&apos;nyan&apos;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span>options<span class="token punctuation">.</span>mocha<span class="token punctuation">.</span>reporter <span class="token comment" spellcheck="true">// &quot;nyan&quot;</span>
</code></pre>
<ul>
<li>Since the Neutrino API no longer accepts preset strings in its constructor, you must now pass presets and middleware
as code/functions to the <code>.use()</code> method.</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// v4 API</span>
<span class="token keyword">const</span> Neutrino <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;neutrino-preset-mocha&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// v5 API</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
api<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino-preset-mocha&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This also means the API function no longer does preset module resolution. If you wish to require presets and middleware
and have them simultaneously <code>use</code>d, use <code>requiresAndUses</code>:</p>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// v5 API</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">usesAndRequires</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">,</span>
  <span class="token string">&apos;neutrino-preset-mocha&apos;</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><code>neutrino.getWebpackOptions()</code> has been removed in favor of the lower level to <code>neutrino.config.toConfig()</code>.</li>
<li>Using a <code>node</code> target no longer skips the watcher for a builder, it now uses the Webpack source watcher. This means
commands like <code>neutrino start &amp;&amp; node build</code> are obsolete. <code>neutrino build &amp;&amp; node build</code> would work to start a Node
instance for production-built bundles.</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="cli/" class="navigation navigation-prev navigation-unique" aria-label="Previous page: CLI">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Upgrading from v4 to v5","level":"1.13","depth":1,"next":{"title":"v4 Documentation","level":"1.14","depth":1,"url":"https://github.com/mozilla-neutrino/neutrino-dev/tree/docs-v4/docs","ref":"https://github.com/mozilla-neutrino/neutrino-dev/tree/docs-v4/docs","articles":[]},"previous":{"title":"CLI","level":"1.12","depth":1,"path":"cli/README.md","ref":"./cli/README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs","npmsearchlist"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/mozilla-neutrino/neutrino-dev/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"npmsearchlist":{},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit page","base":"https://github.com/mozilla-neutrino/neutrino-dev/tree/master/docs"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Neutrino","gitbook":"*"},"file":{"path":"upgrading-neutrino.md","mtime":"2017-03-29T13:36:40.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-06-07T13:35:22.930Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-npmsearchlist/script.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

