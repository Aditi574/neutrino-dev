
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>API Â· Neutrino</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-npmsearchlist/styles.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../cli/" />
    
    
    <link rel="prev" href="../learning-resources.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../installation.html">
            
                <a href="../installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../usage.html">
            
                <a href="../usage.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../project-layout.html">
            
                <a href="../project-layout.html">
            
                    
                    Project Layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../FAQ.html">
            
                <a href="../FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../presets/">
            
                <a href="../presets/">
            
                    
                    Presets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../presets/neutrino-preset-web/">
            
                <a href="../presets/neutrino-preset-web/">
            
                    
                    Web
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../presets/neutrino-preset-react/">
            
                <a href="../presets/neutrino-preset-react/">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../presets/neutrino-preset-node/">
            
                <a href="../presets/neutrino-preset-node/">
            
                    
                    Node.js
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../presets/neutrino-preset-airbnb-base/">
            
                <a href="../presets/neutrino-preset-airbnb-base/">
            
                    
                    Airbnb
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../presets/neutrino-preset-karma/">
            
                <a href="../presets/neutrino-preset-karma/">
            
                    
                    Karma
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../presets/neutrino-preset-mocha/">
            
                <a href="../presets/neutrino-preset-mocha/">
            
                    
                    Mocha
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../presets/neutrino-preset-jest/">
            
                <a href="../presets/neutrino-preset-jest/">
            
                    
                    Jest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../presets/community-presets.html">
            
                <a href="../presets/community-presets.html">
            
                    
                    Community presets
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../middleware/">
            
                <a href="../middleware/">
            
                    
                    Middleware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../middleware/neutrino-middleware-banner/">
            
                <a href="../middleware/neutrino-middleware-banner/">
            
                    
                    banner
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../middleware/neutrino-middleware-chunk/">
            
                <a href="../middleware/neutrino-middleware-chunk/">
            
                    
                    chunk
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../middleware/neutrino-middleware-clean/">
            
                <a href="../middleware/neutrino-middleware-clean/">
            
                    
                    clean
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../middleware/neutrino-middleware-compile-loader/">
            
                <a href="../middleware/neutrino-middleware-compile-loader/">
            
                    
                    compile-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../middleware/neutrino-middleware-copy/">
            
                <a href="../middleware/neutrino-middleware-copy/">
            
                    
                    copy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../middleware/neutrino-middleware-env/">
            
                <a href="../middleware/neutrino-middleware-env/">
            
                    
                    env
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../middleware/neutrino-middleware-eslint/">
            
                <a href="../middleware/neutrino-middleware-eslint/">
            
                    
                    eslint
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="../middleware/neutrino-middleware-font-loader/">
            
                <a href="../middleware/neutrino-middleware-font-loader/">
            
                    
                    font-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="../middleware/neutrino-middleware-hot/">
            
                <a href="../middleware/neutrino-middleware-hot/">
            
                    
                    hot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="../middleware/neutrino-middleware-html-loader/">
            
                <a href="../middleware/neutrino-middleware-html-loader/">
            
                    
                    html-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11" data-path="../middleware/neutrino-middleware-html-template/">
            
                <a href="../middleware/neutrino-middleware-html-template/">
            
                    
                    html-template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12" data-path="../middleware/neutrino-middleware-image-loader/">
            
                <a href="../middleware/neutrino-middleware-image-loader/">
            
                    
                    image-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13" data-path="../middleware/neutrino-middleware-loader-merge/">
            
                <a href="../middleware/neutrino-middleware-loader-merge/">
            
                    
                    loader-merge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.14" data-path="../middleware/neutrino-middleware-minify/">
            
                <a href="../middleware/neutrino-middleware-minify/">
            
                    
                    minify
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.15" data-path="../middleware/neutrino-middleware-named-modules/">
            
                <a href="../middleware/neutrino-middleware-named-modules/">
            
                    
                    named-modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.16" data-path="../middleware/neutrino-middleware-named-start-server/README.md">
            
                <span>
            
                    
                    start-server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.17" data-path="../middleware/neutrino-middleware-named-style-loader/README.md">
            
                <span>
            
                    
                    style-loader
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../customization/">
            
                <a href="../customization/">
            
                    
                    Customization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../customization/simple.html">
            
                <a href="../customization/simple.html">
            
                    
                    Simple
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../customization/advanced.html">
            
                <a href="../customization/advanced.html">
            
                    
                    Advanced
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../creating-presets.html">
            
                <a href="../creating-presets.html">
            
                    
                    Creating presets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../learning-resources.html">
            
                <a href="../learning-resources.html">
            
                    
                    Learning Resources
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.11" data-path="./">
            
                <a href="./">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../cli/">
            
                <a href="../cli/">
            
                    
                    CLI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../upgrading-neutrino.html">
            
                <a href="../upgrading-neutrino.html">
            
                    
                    Upgrading from v4 to v5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <a target="_blank" href="https://github.com/mozilla-neutrino/neutrino-dev/tree/docs-v4/docs">
            
                    
                    v4 Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../contributing/">
            
                <a href="../contributing/">
            
                    
                    Contributing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../contributing/development.html">
            
                <a href="../contributing/development.html">
            
                    
                    Development Process
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../contributing/code-of-conduct.html">
            
                <a href="../contributing/code-of-conduct.html">
            
                    
                    Code of Conduct
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >API</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="neutrino-api">Neutrino API</h1>
<p>When using Neutrino via the <a href="../cli/">CLI</a>, it creates an instance of the Neutrino API which picks up
any middleware and arguments passed on the command line or located in package.json. If you desire, you can also create
your own instance of the Neutrino API and interact with it programmatically.</p>
<h2 id="importing">Importing</h2>
<p>The default export of the Neutrino module is an object with several mechanisms for interacting with the API:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span>
  Neutrino<span class="token punctuation">,</span>
  run<span class="token punctuation">,</span>
  build<span class="token punctuation">,</span>
  inspect<span class="token punctuation">,</span>
  start<span class="token punctuation">,</span>
  test
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The <code>Neutrino</code> function is the lowest-level API, with each of the other methods a higher-level API
which creates an instance of the API internally. First, we will cover the low-level <code>Neutrino</code> API and
later showing how to use the higher-level functions.</p>
<h2 id="instantiation">Instantiation</h2>
<p>In order to access the Neutrino API, you must require or import it and invoke it, passing in any
options:</p>
<p>Using <code>require</code>:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> neutrino <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Using ES imports:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> neutrino <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="api-options">API options</h2>
<p>The Neutrino function can accept an object for setting a number of useful options:</p>
<h3 id="optionsroot"><code>options.root</code></h3>
<p>Set the base directory which Neutrino middleware and presets operate on. Typically this is the project directory where
the package.json would be located. If the option is not set, Neutrino defaults it to <code>process.cwd()</code>. If a relative
path is specified, it will be resolved relative to <code>process.cwd()</code>; absolute paths will be used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to process.cwd()</span>

  <span class="token comment" spellcheck="true">// relative, resolves to process.cwd() + ./website</span>
  root<span class="token punctuation">:</span> <span class="token string">&apos;./website&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  root<span class="token punctuation">:</span> <span class="token string">&apos;/code/website&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="optionssource"><code>options.source</code></h3>
<p>Set the directory which contains the application source code. If the option is not set, Neutrino defaults it to <code>src</code>.
If a relative path is specified, it will be resolved relative to <code>options.root</code>; absolute paths will be used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to options.root + src</span>

  <span class="token comment" spellcheck="true">// relative, resolves to options.root + ./lib</span>
  source<span class="token punctuation">:</span> <span class="token string">&apos;./lib&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  source<span class="token punctuation">:</span> <span class="token string">&apos;/code/website/lib&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="optionsoutput"><code>options.output</code></h3>
<p>Set the directory which will be the output of built assets. If the option is not set, Neutrino defaults it to <code>build</code>.
If a relative path is specified, it will be resolved relative to <code>options.root</code>; absolute paths will be used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to options.root + build</span>

  <span class="token comment" spellcheck="true">// relative, resolves to options.root + ./dist</span>
  output<span class="token punctuation">:</span> <span class="token string">&apos;./dist&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  output<span class="token punctuation">:</span> <span class="token string">&apos;/code/website/dist&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="optionstests"><code>options.tests</code></h3>
<p>Set the directory that contains test files. If the option is not set, Neutrino defaults it to <code>test</code>.
If a relative path is specified, it will be resolved relative to <code>options.root</code>; absolute paths will be used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to options.root + test</span>

  <span class="token comment" spellcheck="true">// relative, resolves to options.root + ./testing</span>
  tests<span class="token punctuation">:</span> <span class="token string">&apos;./testing&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  tests<span class="token punctuation">:</span> <span class="token string">&apos;/code/website/testing&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="optionsentry"><code>options.entry</code></h3>
<p>Set the main entry point for the application. If the option is not set, Neutrino defaults it to <code>index.js</code>.
If a relative path is specified, it will be resolved relative to <code>options.source</code>; absolute paths will be used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to options.source + index.js</span>

  <span class="token comment" spellcheck="true">// relative, resolves to options.source + ./entry.js</span>
  entry<span class="token punctuation">:</span> <span class="token string">&apos;./entry.js&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  entry<span class="token punctuation">:</span> <span class="token string">&apos;/code/website/lib/entry.js&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="optionsnodemodules"><code>options.node_modules</code></h3>
<p>Set the directory which contains the Node.js modules of the project. If the option is not set, Neutrino defaults it to
<code>node_modules</code>. If a relative path is specified, it will be resolved relative to <code>options.root</code>; absolute paths will be
used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to options.root + node_modules</span>

  <span class="token comment" spellcheck="true">// relative, resolves to options.root + ./modules</span>
  node_modules<span class="token punctuation">:</span> <span class="token string">&apos;./modules&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  node_modules<span class="token punctuation">:</span> <span class="token string">&apos;/code/website/modules&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="loading-middleware">Loading middleware</h2>
<p>Using the Neutrino API you can load <a href="../middleware/">middleware</a> and presets (which are also just middleware)
using the <code>use</code> method. The <code>use</code> method takes in a middleware function, and optionally any options that should be
passed to the middleware function.</p>
<pre class="language-"><code class="lang-js">neutrino<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middleware<span class="token punctuation">,</span> middlewareOptions<span class="token punctuation">)</span>
</code></pre>
<p>Typically presets do not require any additional options, and middleware may, but check with your particular package
for specifics. As an example, if you wanted to require the list of presets and Neutrino options from a package.json:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> pkg <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./package.json&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> neutrino <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>neutrino<span class="token punctuation">.</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>

neutrino<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>neutrino<span class="token punctuation">.</span>use<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>You can call <code>.use</code> iteratively for multiple presets:</p>
<pre class="language-"><code class="lang-js">pkg<span class="token punctuation">.</span>neutrino<span class="token punctuation">.</span>use
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>neutrino<span class="token punctuation">.</span>use<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="environment">Environment</h2>
<p>When using the CLI and the higher-level API functions, environment variables are automatically set based on the command
you are using. When using the <code>Neutrino</code> low-level API this is not the case, and you <strong>must</strong> set it prior to calling
any build commands or loading any middleware if you expect them to build correctly based on their target.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> neutrino <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">=</span> <span class="token string">&apos;production&apos;</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// load middleware...</span>
</code></pre>
<h2 id="neutrino-api">Neutrino API</h2>
<p>When creating a Neutrino instance, you have the option of providing an object which can be passed as options to
middleware as <code>neutrino.options</code>.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> neutrino <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// or with optional options</span>
<span class="token keyword">const</span> neutrino <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span> jest<span class="token punctuation">:</span> <span class="token punctuation">{</span> bail<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="options"><code>options</code></h3>
<p>An object containing various properties for the benefit of the API and middleware. This can contain
options set by both Neutrino and any included middleware.</p>
<h3 id="config"><code>config</code></h3>
<p>When constructing a Neutrino instance, a property of <code>config</code> is set to be a new instance of
<a href="https://github.com/mozilla-neutrino/webpack-chain" target="_blank">webpack-chain</a>. This property is then available to all presets
which subsequently augment it with their specific configuration. All middleware and presets added use this single
<code>config</code> to store their data, meaning that middleware load order has an effect on which config values take precedence.
Middleware loaded first will have any configuration overridden by later middleware with matching properties.</p>
<h3 id="usemiddleware-middlewareoptions"><code>use(middleware, middlewareOptions)</code></h3>
<p>Invoke a Neutrino middleware function, optionally providing options which will be passed to the middleware function.
Middleware will be invoked with two arguments:</p>
<ol>
<li>The Neutrino instance</li>
<li>The optional <code>middlewareOptions</code></li>
</ol>
<p>For example, given the following middleware function:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">middleware</span><span class="token punctuation">(</span>neutrino<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  neutrino<span class="token punctuation">.</span>config
    <span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">&apos;index&apos;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>entryPoint<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// Passing this middleware function to Neutrino, along with some options:</span>
neutrino<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middleware<span class="token punctuation">,</span> <span class="token punctuation">{</span> entryPoint<span class="token punctuation">:</span> <span class="token string">&apos;babel-polyfill&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="emitforalleventname-payload"><code>emitForAll(eventName, payload)</code></h3>
<p>Trigger a Promise-dependent event. For example, calling <code>emitForAll(&apos;build&apos;)</code> will trigger an event named build, and
each event handler can return a Promise denoting when it is finished. When all events have finished, this call will
resolve.</p>
<p>This method returns a Promise which resolves when all event handlers have also resolved.</p>
<pre class="language-"><code class="lang-js">api
  <span class="token punctuation">.</span><span class="token function">emitForAll</span><span class="token punctuation">(</span><span class="token string">&apos;custom-event&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;All custom-events have resolved!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>By passing an additional argument for <code>payload</code>, you can pass custom data to all the event handlers</p>
<pre class="language-"><code class="lang-js">api<span class="token punctuation">.</span><span class="token function">emitForAll</span><span class="token punctuation">(</span><span class="token string">&apos;custom-event&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> custom<span class="token punctuation">:</span> <span class="token string">&apos;payload&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// ...</span>

neutrino<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&apos;custom-event&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>args<span class="token punctuation">,</span> payload<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>payload<span class="token punctuation">.</span>custom<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// &quot;payload&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="configtoconfig"><code>config.toConfig()</code></h3>
<p>While tools like webpack-chain provide a convenient API for creating Webpack configurations, this is not a format that
is understandable by Webpack. With <code>config.toConfig()</code>, the webpack-chain instance at <code>config</code> will be converted to
a configuration object readable directly by Webpack.</p>
<pre class="language-"><code class="lang-js">api<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">toConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// -&gt; { ... }</span>
</code></pre>
<h3 id="requiresandusesmiddleware"><code>requiresAndUses(middleware)</code></h3>
<p>This method takes an array of module strings which map to the location of middleware and returns a
<a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which will attempt to look up, require, and <code>use</code> each middleware.
This function is shorthand for <code>api.useRequires(api.requires(middleware))</code>.</p>
<p>The Future can be resolved with an <a href="https://facebook.github.io/immutable-js/docs/#/List" target="_blank">Immutable List</a> of middleware,
or rejected with an error if a failure occurs requiring the middleware.</p>
<pre class="language-"><code class="lang-js">api<span class="token punctuation">.</span><span class="token function">requiresAndUses</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;middleware-alpha&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;middleware-beta&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Could not import middleware&apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Finished importing all middleware&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="requiresmiddleware"><code>requires(middleware)</code></h3>
<p>This method takes an array of module strings which map to the location of middleware and returns a
<a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which will attempt to look up and require each middleware.
The middleware is not <code>use</code>d at this point, only required.</p>
<p>The Future can be resolved with an <a href="https://facebook.github.io/immutable-js/docs/#/List" target="_blank">Immutable List</a> of middleware,
or rejected with an error if a failure occurs requiring the middleware.</p>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// Using Future to fork and handle any errors</span>
api
  <span class="token punctuation">.</span><span class="token function">requires</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;middleware-alpha&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;middleware-beta&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Could not require middleware&apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">,</span>
    middleware <span class="token operator">=</span><span class="token operator">&gt;</span> middleware<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// Using Future promise API to fork and handle any errors</span>
api
  <span class="token punctuation">.</span><span class="token function">requires</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;middleware-alpha&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;middleware-beta&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>middleware <span class="token operator">=</span><span class="token operator">&gt;</span> middleware<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Could not require middleware&apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="userequiresrequires"><code>useRequires(requires)</code></h3>
<p>Accepts a <a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> of a
<a href="https://facebook.github.io/immutable-js/docs/#/List" target="_blank">List</a> of middleware to run through <code>api.use</code>. Useful for passing
the Future from <code>api.requires</code> to have the List to be subsequently <code>use</code>d.</p>
<p>The Future can be resolved with an <a href="https://facebook.github.io/immutable-js/docs/#/List" target="_blank">Immutable List</a> of middleware,
or rejected with an error if a failure occurs requiring the middleware.</p>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">// Using Future to fork and handle any errors</span>
api<span class="token punctuation">.</span><span class="token function">useRequires</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span><span class="token function">requires</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;middleware-alpha&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;middleware-beta&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Could not import middleware&apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Finished importing all middleware&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="registercommand-handler"><code>register(command, handler)</code></h3>
<p>This method registers a new command which can be run from the API at a later time. This function takes two
arguments: a string command name, and a function which accepts a Webpack configuration and returns a
<a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a>.</p>
<p>_Example: add a new runnable command which resolves with a JSON-formatted Webpack configuration:`</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Future <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;fluture&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&apos;jsonify&apos;</span><span class="token punctuation">,</span> config <span class="token operator">=</span><span class="token operator">&gt;</span> Future<span class="token punctuation">.</span><span class="token keyword">of</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="runcommand"><code>run(command)</code></h3>
<p>This method returns a Future which executes a command which has been registered in the Neutrino API. It accepts a
single argument for the command name to run.</p>
<p>_Example: execute the <code>jsonify</code> command we registered in the <code>register()</code> example`:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Future <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;fluture&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&apos;jsonify&apos;</span><span class="token punctuation">,</span> config <span class="token operator">=</span><span class="token operator">&gt;</span> Future<span class="token punctuation">.</span><span class="token keyword">of</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// ...</span>

api
  <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">&apos;jsonify&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">,</span> json <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="run-api"><code>run</code> API</h2>
<p>The Neutrino package contains several functions automate several pieces of interacting with the Neutrino API.
There is the mid-level <code>run</code> function, and higher-level functions <code>build</code>, <code>inspect</code>, <code>start</code>, and <code>test</code>. These are
functions that are invoked when using the CLI.</p>
<p>Every runnable command performs the following flow:</p>
<ul>
<li>Instantiates a <code>Neutrino</code> API</li>
<li>Sets the <code>NODE_ENV</code> environment variable</li>
<li>Requires and <code>use</code>s provided middleware</li>
<li>Merges any config overrides at <code>options.config</code> into the <code>api.config</code> at a higher precedence</li>
<li>Triggers all <code>pre</code> events for the given command name</li>
<li>Invokes <code>api.run</code> for the registered command name</li>
<li>Triggers all events for the given command name</li>
</ul>
<p>Calling a runnable command will return a <a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which can then be used to
kick off the above flow. This Future will be resolved with the resolution value of the command, or rejected
with any errors the command provides.</p>
<h3 id="runcommand-middleware-options"><code>run(command, middleware, options)</code></h3>
<p>The lower-level <code>run</code> function takes three arguments:</p>
<ul>
<li>A string command name which the API can call</li>
<li>An array of module strings which will be required and used as middleware</li>
<li>An object of options that should be specified to the Neutrino API</li>
</ul>
<p>Prior to starting this process, Neutrino will trigger and wait for <code>pre{command}</code> events to
finish. After it is complete, Neutrino will trigger and wait for <code>{command}</code> events to finish.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> run <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">run</span><span class="token punctuation">(</span><span class="token string">&apos;build&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-react&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    errors <span class="token operator">=</span><span class="token operator">&gt;</span> errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">,</span>
    stats <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span> colors<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="startmiddleware-options"><code>start(middleware, options)</code></h3>
<p>The <code>start</code> function takes two arguments:</p>
<ul>
<li>An array of module strings which will be required and used as middleware</li>
<li>An object of options that should be specified to the Neutrino API</li>
</ul>
<p>The <code>start()</code> function is responsible for creating a development bundle, and when possible, starting a development
server or source watcher. Prior to starting this process, Neutrino will trigger and wait for <code>prestart</code> events to
finish. After it is complete, Neutrino will trigger and wait for <code>start</code> events to finish.</p>
<p>If the Neutrino config contains options for <code>devServer</code>, then a webpack-dev-server will be started, otherwise a Webpack
source watcher will be started.</p>
<p>Calling start will return a <a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which can then be used to
kick off the runnable flow. This Future will be resolved with a Webpack compiler (for example, if you wish to listen for
additional build events), or reject with an <strong>array of errors</strong>. This resolution will be completed when the dev server
or Webpack watcher has been started.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> start <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-react&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    errors <span class="token operator">=</span><span class="token operator">&gt;</span> errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">,</span>
    compiler <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;App running!&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="buildmiddleware-options"><code>build(middleware, options)</code></h3>
<p>The <code>build</code> function takes two arguments:</p>
<ul>
<li>An array of module strings which will be required and used as middleware</li>
<li>An object of options that should be specified to the Neutrino API</li>
</ul>
<p>The <code>build()</code> function is responsible for creating a bundle typically used for production. Prior to starting this process,
Neutrino will trigger and wait for <code>prebuild</code> events to finish. After it is complete, Neutrino will trigger and wait for
<code>build</code> events to finish.</p>
<p>Calling start will return a <a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which can then be used to
kick off the runnable flow. This Future will be resolved with a Webpack stats object about the build, or reject with an
<strong>array of errors</strong>. This resolution will be completed when the build has been completed.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> build <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    errors <span class="token operator">=</span><span class="token operator">&gt;</span> errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">,</span>
    stats <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span> colors<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="testmiddleware-options"><code>test(middleware, options)</code></h3>
<p>The <code>test</code> function takes two arguments:</p>
<ul>
<li>An array of module strings which will be required and used as middleware</li>
<li>An object of options that should be specified to the Neutrino API</li>
</ul>
<p>The <code>test()</code> function is responsible for gathering middleware and options needed for testing and triggering relevant
events as a signal to test middleware that they may run. Using the <code>test</code> method has no other functionality other than
performing the automated runnable flow outlined above. Since <code>test()</code> does nothing other than triggering this flow,
without middleware listening for <code>test</code> events, nothing will happen. Prior to starting this process, Neutrino will
trigger and wait for <code>pretest</code> events to finish. After it is complete, Neutrino will trigger and wait for
<code>test</code> events to finish, in which test runners will do their work.</p>
<p>Any <code>args</code> passed to <code>test()</code> are passed on to the event handles and typically have properties for an array of
<code>files</code> to test, as well as a property for <code>watch</code>ing and rerunning tests.</p>
<p>Calling start will return a <a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which can then be used to
kick off the runnable flow. This Future will be resolved, or reject with <strong>an error</strong>. This resolution will be completed
when the testing has been finished.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> test <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Testing completed!&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// ---</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> args<span class="token punctuation">:</span> <span class="token punctuation">{</span> files<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token comment" spellcheck="true">/* ... */</span><span class="token punctuation">]</span><span class="token punctuation">,</span> watch<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Testing completed!&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="inspectmiddleware-options"><code>inspect(middleware, options)</code></h3>
<p>The <code>inspect</code> function takes two arguments:</p>
<ul>
<li>An array of module strings which will be required and used as middleware</li>
<li>An object of options that should be specified to the Neutrino API</li>
</ul>
<p>The <code>inspect()</code> function is responsible for creating an object string which represents a Webpack configuration for the
provided middleware and options. Upon following the runnable flow, <code>inspect()</code> will:</p>
<ul>
<li>Grab the Webpack configuration object</li>
<li>Deep-sort the object</li>
<li>Stringify the object with 2 spaces (<strong>not</strong> JSON stringified!)</li>
</ul>
<p>Calling start will return a <a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which can then be used to
kick off the runnable flow. This Future will be resolved with a string representation of the Webpack config, or reject
with <strong>an error</strong>. This resolution will be completed when the build has been completed.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> inspect <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">inspect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">,</span>
    config <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../learning-resources.html" class="navigation navigation-prev " aria-label="Previous page: Learning Resources">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../cli/" class="navigation navigation-next " aria-label="Next page: CLI">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"API","level":"1.11","depth":1,"next":{"title":"CLI","level":"1.12","depth":1,"path":"cli/README.md","ref":"./cli/README.md","articles":[]},"previous":{"title":"Learning Resources","level":"1.10","depth":1,"path":"learning-resources.md","ref":"./learning-resources.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs","npmsearchlist"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/mozilla-neutrino/neutrino-dev/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"npmsearchlist":{},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit page","base":"https://github.com/mozilla-neutrino/neutrino-dev/tree/master/docs"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Neutrino","gitbook":"*"},"file":{"path":"api/README.md","mtime":"2017-03-24T23:27:54.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-27T18:37:40.600Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-npmsearchlist/script.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

